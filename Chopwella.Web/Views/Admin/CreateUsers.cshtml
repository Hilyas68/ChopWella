

@{
    ViewBag.Title = "CreateUsers";
}

<h2>CreateUsers</h2>

<form class="form-horizontal" role="form" method="post" id="userForm">
    <div class="form-group">
        <label class="col-md-2 control-label">Username</label>
        <div class="col-md-10">
            <input type="text" id="username" name="username" class="form-control" autocomplete="off">
        </div>
    </div>
    <div class="form-group">
        <label class="col-md-2 control-label">Email</label>
        <div class="col-md-10">
            <input type="text" class="form-control" placeholder=" " id="email" name="email">
        </div>
    </div>
    <div class="form-group">
        <label class="col-md-2 control-label" for="example-email">Password</label>
        <div class="col-md-10">
            <input type="password" id="password" name="password" class="form-control">
        </div>
    </div>
    <div class="form-group">
        <label class="col-md-2 control-label">Confirm Password</label>
        <div class="col-md-10">
            <input type="password" class="form-control" id="confirmpassword" name="confirmpassword">
        </div>
    </div>
    <div class="form-group">
        <label class="col-md-2 control-label">Role</label>
        <div class="col-md-10">
            <select class="form-control" name="rolename" id="rolename">
                @foreach (var role in Model.Roles)
                {
                    <option value="@role.Id">@role.Name</option>
                }
            </select>
        </div>
    </div>
    <div class="form-group">
        <button type="submit" class="btn btn-primary">Create</button>
    </div>
</form>
@section scripts {
    <script>
        $(function () {
            $('#userForm').bind('submit', function (ev) {

                ev.preventDefault();

                var formData = {};
                formData.Username = $('#username').val();
                formData.Password = $('#password').val();
                formData.ConfirmPassword = $('#confirmpassword').val();
                formData.Email = $('#email').val();
                formData.RoleName = $('#rolename option:selected').text();

                $.ajax({
                    url: '/api/user/create',
                    type: 'POST',
                    contentType: 'application/json; charset=utf-8',
                    data: JSON.stringify(formData),
                    error: function () {

                        alert('error occurred, try again');
                    },
                    success: function () { }
                });

            });
        });
    </script>
}

